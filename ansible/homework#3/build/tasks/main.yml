---
# tasks file for build
- name: install maven
  apt: name=maven state=present

- name: Clone a github repository
  git: repo={{git_repo_app}} dest={{work_folder}} clone=yes update=yes

- name: Build application
  command: 
    chdir: "{{ work_folder }}" 
    cmd: mvn package -Dmaven.test.skip -T 1C

- name: get artifact
  synchronize:
    mode: pull
    src: /tmp/homework/target/*.war
    dest: /tmp/
  delegate_to: localhost